<?xml version="1.0" encoding="UTF-8"?>
<sv:node sv:name="init-behaviour" xmlns:sv="http://www.jcp.org/jcr/sv/1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <sv:property sv:name="jcr:primaryType" sv:type="Name">
    <sv:value>mgnl:content</sv:value>
  </sv:property>
  <sv:property sv:name="jcr:mixinTypes" sv:type="Name">
    <sv:value>mix:lockable</sv:value>
  </sv:property>
  <sv:property sv:name="jcr:uuid" sv:type="String">
    <sv:value>35052f96-707e-459e-a1f0-da52724dca48</sv:value>
  </sv:property>
  <sv:property sv:name="bypass" sv:type="Boolean">
    <sv:value>false</sv:value>
  </sv:property>
  <sv:property sv:name="extension" sv:type="String">
    <sv:value>js</sv:value>
  </sv:property>
  <sv:property sv:name="jcr:created" sv:type="Date">
    <sv:value>2013-07-22T14:26:56.970+02:00</sv:value>
  </sv:property>
  <sv:property sv:name="modelClass" sv:type="String">
    <sv:value>info.magnolia.module.templatingkit.resources.STKResourceModel</sv:value>
  </sv:property>
  <sv:property sv:name="rights" sv:type="String">
    <sv:value/>
  </sv:property>
  <sv:property sv:name="source" sv:type="String">
    <sv:value/>
  </sv:property>
  <sv:property sv:name="text" sv:type="String">
    <sv:value xsi:type="xs:base64Binary">LyoqDQogKiBAYXV0aG9yIGFsZXhhbmRlci5mYXJrYXMNCiAqLw0KDQpqUXVlcnkubm9Db25mbGljdCgpOw0KKGZ1bmN0aW9uKCQpew0KDQogIGZ1bmN0aW9uIGNhbGxPbkRvbVJlYWR5KCkgew0KDQoNCiAgICAkKCdodG1sJykuYWRkQ2xhc3MoJ2pzLW9uJyk7IC8vIGh0bWwgY2xhc3MNCiAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ2pzLW9mZicpOw0KICAgIC8vWmVicmEtVGFibGVzDQogICAgJCgnZGl2LnRleHQgdGJvZHkgdHI6bnRoLWNoaWxkKG9kZCknKS5hZGRDbGFzcygnb2RkJyk7DQoNCiAgICBhZGRQcmludExpbmsoKTsNCg0KICAgIC8vd2FpdCBmb3IgdGhlIHN3Zm9iamVjdCBET00tUmVhZHksIHNvIHdlIGNhbiByZXR1cm4gYSBwcm9wZXIgcmVmZXJlbmNlIHRvIGZsYXNoIG9iamVjdA0KICAgIHN3Zm9iamVjdC5hZGREb21Mb2FkRXZlbnQoZnVuY3Rpb24oKXsNCiAgICAgICQoJ2Rpdi5mbGFzaCcpLmVtYmVkU1dGKCk7DQogICAgfSk7DQoNCiAgICAkKCcjbmF2LWdsb2JhbC5tZWdhbWVudScpLnNpbXBsZU1lbnUoew0KICAgICAgZ2VuZXJhdGVTa2lwOiB0cnVlLA0KICAgICAgc2tpcFN0cnVjdHVyZTogJzxhIGNsYXNzPSJtZW51LXNraXAiIGhyZWY9IiMiIHRpdGxlPSJVbnRlcm1lbsO8IHtmcm9tfSDDvGJlcnNwcmluZ2VuIj5kaXJla3QgenUgTWVuw7wge3RvfSBzcHJpbmdlbjwvYT4nLA0KICAgICAgc2tpcEVuZFN0cnVjdHVyZTogJzxhIGNsYXNzPSJtZW51LXNraXAiIGhyZWY9IiMiIHRpdGxlPSJhbnMgRW5kZSB2b20gTWVudSBzcHJpbmdlbiI+VW50ZXJtZW7DvCB7ZnJvbX0gw7xiZXJzcHJpbmdlbjwvYT4nLA0KICAgICAgaW5pdDogZnVuY3Rpb24oZSwgdWkpew0KDQogICAgICB9LA0KICAgICAgLy9zaG93SGlkZGVuT25Gb2N1czogdHJ1ZSwNCiAgICAgIHNob3c6IGZ1bmN0aW9uKGUsIHVpKXsNCiAgICAgICAgdmFyIG1lbnVCb3ggPSAkKCc+IGRpdi5tZW51LWJveCcsIHVpLm1lbnUpDQogICAgICAgICAgLmNzcyh7DQogICAgICAgICAgICB0b3A6IHVpLm1lbnUub3V0ZXJIZWlnaHQoe21hcmdpbjogdHJ1ZX0pICogLTENCiAgICAgICAgICB9KTsNCg0KICAgICAgICB1aS5tZW51LmFkZENsYXNzKCdtZW51LW9wZW4nKTsNCiAgICAgICAgbWVudUJveC5zdG9wKHRydWUsIHRydWUpDQogICAgICAgICAgLmFuaW1hdGUoew0KICAgICAgICAgICAgdG9wOiAwDQogICAgICAgICAgfSk7DQogICAgICB9LA0KICAgICAgaGlkZTogZnVuY3Rpb24oZSwgdWkpew0KICAgICAgICB2YXIgbWVudUJveCA9ICQoJz4gZGl2Lm1lbnUtYm94JywgdWkubWVudSk7DQogICAgICAgIG1lbnVCb3guYW5pbWF0ZSgNCiAgICAgICAgICB7DQogICAgICAgICAgICB0b3A6IHVpLm1lbnUub3V0ZXJIZWlnaHQoe21hcmdpbjogdHJ1ZX0pICogLTENCiAgICAgICAgICB9LA0KICAgICAgICAgIHtjb21wbGV0ZTogZnVuY3Rpb24oKXsNCiAgICAgICAgICAgIHVpLm1lbnUucmVtb3ZlQ2xhc3MoJ21lbnUtb3BlbicpOw0KICAgICAgICAgICAgbWVudUJveC5jc3Moe3RvcDogMH0pOw0KICAgICAgICAgIH19DQogICAgICAgICk7DQoNCiAgICAgIH0NCiAgICB9KTsNCg0KICAgIC8vaW5pdGlhbGl6ZSBmbG93cGxheWVyDQogICAgd2luZG93LmNvbnRleHRQYXRoID0gd2luZG93LmNvbnRleHRQYXRoIHx8DQogICAgICAnJzsNCg0KICAgICQoImRpdi52aWRlbyBhIikuZmxvd3BsYXllcih7DQogICAgICAgIC8vZmxhc2hlbWJlZCBwYXJhbXM6IHNlZSBodHRwOi8vZmxvd3BsYXllci5vcmcvZG9jdW1lbnRhdGlvbi9jb25maWd1cmF0aW9uL3BsYXllci5odG1sI2VtYmVkZGluZw0KICAgICAgICBzcmM6IGNvbnRleHRQYXRoICsgIi8ucmVzb3VyY2VzL3RlbXBsYXRpbmcta2l0L3N3Zi9mbG93cGxheWVyLnN3ZiIsDQogICAgICAgIGFsbG93c2NyaXB0YWNjZXNzOiAnc2FtZURvbWFpbicNCiAgICAgIH0sIHsNCiAgICAgICAgLy8gc3BsYXNoIGltYWdlDQogICAgICAgIGNsaXA6ew0KICAgICAgICAgIGF1dG9QbGF5OiBmYWxzZSwNCiAgICAgICAgICBhdXRvQnVmZmVyaW5nOiB0cnVlDQogICAgICAgIH0NCiAgICAgIH0NCiAgICApOw0KDQogICAgLy9kaWZmZXJlbnQgdGFicw0KICAgIGNyZWF0ZVRhYnMoKTsNCiAgICAvLyBmYXFUb2MoKTsNCg0KICAgIC8vVGVhc2VyLVN3aXRjaGVycw0KDQogICAgJCgnZGl2LnRlYXNlci13cmFwcGVyOm5vdCgudHctcGFnaW5nLC50dy1zbGlkZXIpJykNCiAgICAgIC5lYWNoKGZ1bmN0aW9uKCl7DQogICAgICAgICQoJ2Rpdi5wYWdlcicsIHRoaXMpDQogICAgICAgICAgLmFwcGVuZCgnPGRpdiBjbGFzcz0icHJldiI+PHNwYW4gLz48L2Rpdj48ZGl2IGNsYXNzPSJuZXh0Ij48c3BhbiAvPjwvZGl2PicpOw0KICAgICAgICAkKHRoaXMpLnNjcm9sbGVyKCk7DQogICAgICB9KTsNCg0KICAgIHBhZ2luZ1RlYXNlclN3aXRjaGVyKCk7DQogICAgc2xpZGluZ1RlYXNlclN3aXRjaGVyKCk7DQoNCiAgICBjcmVhdGVTaG93Qm94KCk7DQoNCiAgICBzbGlkaW5nVGFicygpOw0KDQogICAgYWRkTGFuZG1hcmtzKCk7DQoNCiAgICAkLnNvY2lhbGJvb2ttYXJrLmluaXQoJ2xpLnNvY2lhbC1iIGEnKTsNCg0KICB9DQoNCg0KICBmdW5jdGlvbiBjcmVhdGVTaG93Qm94KCl7DQogICAgdmFyIHNob3dib3hDRkcgPSB7DQogICAgICAgIHNldEluaXRpYWxDb250ZW50OiB7DQogICAgICAgICAgJ3Nob3dib3gtdGl0bGUnOiAkKCdoMScpLmh0bWwoKSwNCiAgICAgICAgICBwcmV2OiAncHJldmlvdXMnLA0KICAgICAgICAgIG5leHQ6ICduZXh0JywNCiAgICAgICAgICAnY2xvc2UtYnV0dG9uJzogJ2Nsb3NlJywNCiAgICAgICAgICAncGxheS1wYXVzZSc6ICdwbGF5Jw0KICAgICAgICB9LA0KDQogICAgICAgIGdldFRleHRDb250ZW50OiBmdW5jdGlvbihvcGVuZXIsIGNvbnRlbnQsIHVpKXsNCiAgICAgICAgICAvLyBVbSBUZXh0IGF1cyBlaW5lciBkbC1TdHJ1Y3R1cmUgenUgaG9sZW4gKE1hZ25vbGlhLVN0eWxlKQ0KDQogICAgICAgICAgdmFyIGRsICAgICAgICAgPSBvcGVuZXIuY2xvc2VzdCgnZGwnKSwgLy9ob2xlIGRhcyBuw6RjaHN0IGjDtmhlcmUgZGwNCiAgICAgICAgICAgIGRkcyAgICAgICAgPSAkKCdkZCcsIGRsKSwgLy8gaG9sZSBkaWUgZGQNCiAgICAgICAgICAgIGltZyAgICAgICA9ICQoJ2ltZycsIGRsKSwgLy8gaG9sZSBkYXMgaW1nDQogICAgICAgICAgICBleHRyYUNvbnRlbnQgID0gJycNCiAgICAgICAgICA7DQoNCiAgICAgICAgICAvL2NvbnRlbnQgb2JqZWt0IGRpZW50IHp1ciBiZWbDvGxsdW5nIGRlciBsaWdodGJveCBtaXQgd2VpdGVyZW0gY29udGVudA0KICAgICAgICAgIC8vZGllIGVpZ2Vuc2NoYWZ0c25hbWVuIHN0aW1tZW4gbWl0IGRlbiBLbGFzc2VuLU5hbWVuIMO8YmVyZWluDQoNCiAgICAgICAgICAvL2NvbnRlbnRbJ211bHRpbWVkaWEtYm94J10gaXN0IGJlcmVpdHMgbWl0IGRlbSBncm9zc2VuIEJpbGQgdm9yYmVsZWd0DQogICAgICAgICAgLy91bmQgd2lyZCBudW4gbWl0IGRlbSBhbHQgQXR0cmlidXQgZGVzIGtsZWluZW4gQmlsZGVzIHZlcnNlaGVuDQogICAgICAgICAgY29udGVudFsnbXVsdGltZWRpYS1ib3gnXS5hdHRyKCdhbHQnLCBpbWcuYXR0cignYWx0JykpOw0KDQogICAgICAgICAgY29udGVudFsndGV4dC1jb250ZW50J10gPSAnJzsgLy8gU3RyaW5nIGluIGRlbSB3aXIgdW5zZXIgZ2VzYW10IGNvbnRlbnQgenVzYW1tZWbDvGdlbg0KDQogICAgICAgICAgZGRzLmVhY2goZnVuY3Rpb24oKXsNCiAgICAgICAgICAgIHZhciBkZCAgICAgPSAkKHRoaXMpLA0KICAgICAgICAgICAgICBodG1sICAgPSBkZC5odG1sKCkNCiAgICAgICAgICAgIDsNCiAgICAgICAgICAgIGlmKGRkLmlzKCcuY2FwdGlvbicpKXsNCiAgICAgICAgICAgICAgY29udGVudFsndGV4dC1jb250ZW50J10gKz0gJzxoMiBjbGFzcz0iY2FwdGlvbiI+JysgaHRtbCArJzwvaDI+JzsNCiAgICAgICAgICAgIH0gZWxzZSBpZihkZC5pcygnLmxvbmdkZXNjJykpew0KICAgICAgICAgICAgICBjb250ZW50Wyd0ZXh0LWNvbnRlbnQnXSArPSAnPHAgY2xhc3M9ImxvbmdkZXNjIj4nKyBodG1sICsnPC9wPic7DQogICAgICAgICAgICB9IGVsc2UgaWYoIWRkLmlzKCcuem9vbScpKSB7DQogICAgICAgICAgICAgIGV4dHJhQ29udGVudCArPSAnPGxpIGNsYXNzPSInKyB0aGlzLmNsYXNzTmFtZSArJyI+JysgaHRtbCArJzwvbGk+JzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KTsNCg0KICAgICAgICAgIGlmKGV4dHJhQ29udGVudCl7DQogICAgICAgICAgICBjb250ZW50Wyd0ZXh0LWNvbnRlbnQnXSArPSAnPHVsIGNsYXNzPSJzYi1leHRyYSI+JysgZXh0cmFDb250ZW50ICsnPC91bD4nOw0KICAgICAgICAgIH0NCg0KICAgICAgICB9LA0KICAgICAgICBzaG93Q29udGVudEFuaW06IGZ1bmN0aW9uKHVpLCBpbWcsIGUsIGV4dHJhcyl7DQogICAgICAgICAgdmFyIGNvbnRlbnRCb3ggPSAkKCdkaXYuY29udGVudC1ib3gnLCB1aS5lbGVtZW50KTsNCiAgICAgICAgICBjb250ZW50Qm94DQogICAgICAgICAgICAucXVldWUoZnVuY3Rpb24oKXsNCiAgICAgICAgICAgICAgdmFyIGR1cmF0aW9uICAgPSAzMDAsDQogICAgICAgICAgICAgICAgd2lkdGggICAgID0gaW1nWzBdLndpZHRoLA0KICAgICAgICAgICAgICAgIGhlaWdodA0KICAgICAgICAgICAgICA7DQoNCiAgICAgICAgICAgICAgdWkuZWxlbWVudC5jc3Moe2hlaWdodDogdWkuZWxlbWVudC5oZWlnaHQoKX0pOw0KICAgICAgICAgICAgICB1aS5maWxsQ29udGVudCgpOw0KICAgICAgICAgICAgICB3aWR0aCA9IHVpLmNhbGNXaWR0aChpbWcsIHdpZHRoKTsNCg0KICAgICAgICAgICAgICBjb250ZW50Qm94DQogICAgICAgICAgICAgICAgLmNzcygNCiAgICAgICAgICAgICAgICAgIHt3aWR0aDogd2lkdGh9DQogICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgIC5hbmltYXRlKA0KICAgICAgICAgICAgICAgICAge29wYWNpdHk6IDF9LA0KICAgICAgICAgICAgICAgICAge2R1cmF0aW9uOiBkdXJhdGlvbn0NCiAgICAgICAgICAgICAgICApOw0KDQogICAgICAgICAgICAgIHVpLmVsZW1lbnQNCiAgICAgICAgICAgICAgICAuYW5pbWF0ZSh7DQogICAgICAgICAgICAgICAgICBoZWlnaHQ6IGNvbnRlbnRCb3gub3V0ZXJIZWlnaHQoe21hcmdpbjogdHJ1ZX0pICsgJCgnZGl2LnNob3dib3gtaGVhZCcsIHVpLmVsZW1lbnQpLm91dGVySGVpZ2h0KHttYXJnaW46IHRydWV9KQ0KICAgICAgICAgICAgICAgIH0sIHsNCiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uLA0KICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKXsNCiAgICAgICAgICAgICAgICAgICAgICB1aS5lbGVtZW50LmNzcyh7aGVpZ2h0OiAnJ30pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICBjb250ZW50Qm94LmRlcXVldWUoKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICB9Ow0KDQogICAgJCgnZGl2LnR3LWltYWdlcycpLmVhY2goZnVuY3Rpb24oKXsNCg0KICAgICAgJCgnYVtyZWw9c2hvd2JveF0nLCB0aGlzKQ0KICAgICAgICAuYWRkQ2xhc3MoJ3Nob3dib3hlZCcpDQogICAgICAgIC5zaG93Ym94KCQuZXh0ZW5kKHt9LCBzaG93Ym94Q0ZHLCB7DQogICAgICAgICAgc2V0SW5pdGlhbENvbnRlbnQ6IHsNCiAgICAgICAgICAgICdzaG93Ym94LXRpdGxlJzogJCgnOmhlYWRlcicsIHRoaXMpLmh0bWwoKSwNCiAgICAgICAgICAgIHByZXY6ICdwcmV2aW91cycsDQogICAgICAgICAgICBuZXh0OiAnbmV4dCcsDQogICAgICAgICAgICAnY2xvc2UtYnV0dG9uJzogJ2Nsb3NlJywNCiAgICAgICAgICAgICdwbGF5LXBhdXNlJzogJ3BsYXknDQogICAgICAgICAgfQ0KICAgICAgICB9KSk7DQogICAgfSk7DQogICAgJCgnYVtyZWw9c2hvd2JveF06bm90KC5zaG93Ym94ZWQpJykuc2hvd2JveChzaG93Ym94Q0ZHKTsNCiAgfQ0KICBmdW5jdGlvbiBhZGRMYW5kbWFya3MoKXsNCiAgICB2YXIgbGFuZG1hcmtzID0gew0KICAgICAgbmF2aWdhdGlvbjogJyNuYXYtZ2xvYmFsLCAjbmF2LCAjYnJlYWRjcnVtYicsDQogICAgICBzZWFyY2g6ICcjc2VhcmNoLWJveCcsDQogICAgICBhcnRpY2xlOiAnZGl2LnRleHQsIGRpdi50ZWFzZXIsIGRpdi5vcGVuZXIsICNjb21tZW50cyBsaScsDQogICAgICBjb21wbGVtZW50YXJ5OiAnI2V4dHJhcycsDQogICAgICBiYW5uZXI6ICcjYnJhbmRpbmcnLA0KICAgICAgbWFpbjogJyNtYWluJywNCiAgICAgIGNvbnRlbnRpbmZvOiAnZGl2LnRleHQtZGF0YSwgI3NpdGUtaW5mbycNCiAgICB9Ow0KDQogICAgJC5lYWNoKGxhbmRtYXJrcywgZnVuY3Rpb24obGFuZG1hcmssIHNlbCl7DQogICAgICAkKHNlbCkuYXR0cih7cm9sZTogbGFuZG1hcmt9KTsNCiAgICB9KTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHNsaWRpbmdUYWJzKCl7DQogICAgJC5mbi5teVNsaWRlID0gZnVuY3Rpb24oZm4pew0KICAgICAgZm4gPSBmbiB8fCBmdW5jdGlvbigpe307DQogICAgICByZXR1cm4gdGhpcy5hbmltYXRlKHsNCiAgICAgICAgaGVpZ2h0OiAndG9nZ2xlJywNCiAgICAgICAgb3BhY2l0eTogJ3RvZ2dsZScNCiAgICAgIH0sIHsNCiAgICAgICAgZHVyYXRpb246IDUwMCwNCiAgICAgICAgY29tcGxldGU6IGZuLA0KICAgICAgICBkZXF1ZTogdHJ1ZQ0KICAgICAgfSk7DQogICAgfTsNCg0KICAgICQoJ29sLnN1cGVycHJvbW9zLXRvYycpDQogICAgICAuZWFjaChmdW5jdGlvbigpew0KICAgICAgICAkKHRoaXMpDQogICAgICAgICAgLmJpbmQoJ3RhYnRyZWVjb2xsYXBzZScsIGZ1bmN0aW9uKGUsIHVpKXsNCiAgICAgICAgICAgIHVpLnBhbmVsDQogICAgICAgICAgICAgIC5zdG9wKHRydWUsIHRydWUpDQogICAgICAgICAgICAgIC5hbmltYXRlKHsNCiAgICAgICAgICAgICAgICBoZWlnaHQ6ICdoaWRlJywNCiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwDQogICAgICAgICAgICAgIH0sIHtkdXJhdGlvbjogNTAwfSk7DQogICAgICAgICAgfSkNCiAgICAgICAgICAuYmluZCgndGFidHJlZWV4cGFuZCcsIGZ1bmN0aW9uKGUsIHVpKXsNCiAgICAgICAgICAgIHVpLnBhbmVsDQogICAgICAgICAgICAgIC5zdG9wKHRydWUsIHRydWUpDQogICAgICAgICAgICAgIC5hbmltYXRlKHsNCiAgICAgICAgICAgICAgICBoZWlnaHQ6ICdzaG93JywNCiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxDQogICAgICAgICAgICAgIH0sIHtkdXJhdGlvbjogNTAwfSk7DQogICAgICAgICAgfSkNCiAgICAgICAgICAudGFidHJlZSgNCiAgICAgICAgICAgIHthY3RpdmVCdXR0b25DbGFzczogJ29uJywNCiAgICAgICAgICAgIHNlbGVjdEV2ZW50czogJ21vdXNlZW50ZXIgZm9jdXMnLA0KICAgICAgICAgICAgaGFuZGxlRGlzcGxheTogJ2luaXRpYWwnDQogICAgICAgICAgfSkNCiAgICAgICAgICAuZmluZCgnYScpDQogICAgICAgICAgLmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24oZSl7DQoNCiAgICAgICAgICAgIGlmKGUucGFnZVggIT09IDAgJiYgZS5wYWdlWSAhPT0gMCl7DQogICAgICAgICAgICAgIHZhciB1cmwgPSAkKCQodGhpcykuYXR0cignaHJlZicpKQ0KICAgICAgICAgICAgICAgIC5maW5kKCdhOmZpcnN0JykNCiAgICAgICAgICAgICAgICAuYXR0cignaHJlZicpOw0KICAgICAgICAgICAgICBpZih1cmwpew0KICAgICAgICAgICAgICAgIGxvY2F0aW9uID0gdXJsOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfSk7DQogICAgICB9KTsNCg0KDQogIH0NCg0KICBmdW5jdGlvbiBwYWdpbmdUZWFzZXJTd2l0Y2hlcigpew0KICAgIGZ1bmN0aW9uIG15UGFnKHN0YXR1cyl7DQogICAgICAgIGlmKHN0YXR1cyA9PSAnaW5hY3RpdmUnKXsNCiAgICAgICAgICAkKCdhJyx0aGlzKS5hbmltYXRlKHtvcGFjaXR5OiAwLjV9LHtkdXJhdGlvbjogNTAwfSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgJCgnYScsdGhpcykuYW5pbWF0ZSh7b3BhY2l0eTogMX0se2R1cmF0aW9uOiA1MDB9KTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgZnVuY3Rpb24gbXlMaW5rKHN0YXR1cyl7DQogICAgICAgIGlmKHN0YXR1cyA9PSAnc2hvdycpew0KICAgICAgICAgIHRoaXMuYW5pbWF0ZSh7b3BhY2l0eTogMX0se2R1cmF0aW9uOiA1MDB9KTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLmFuaW1hdGUoe29wYWNpdHk6IDB9LHtkdXJhdGlvbjogNTAwfSk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgICQoJ2Rpdi50ZWFzZXItd3JhcHBlci50dy1wYWdpbmcnKS5zY3JvbGxlcih7DQogICAgICAgIHBhZ2luYXRpb246ICdkaXYucGFnaW5hdGlvbicsDQogICAgICAgIHBhZ2luYXRpb25GbjogbXlQYWcsDQogICAgICAgIGxpbmtGbjogbXlMaW5rLA0KICAgICAgICBwYWdpbmF0aW9uVGl0bGVGcm9tOiAnaDInLA0KICAgICAgICBwYWdpbmF0aW9uQXRvbXM6ICc8bGkgY2xhc3M9InBhLSRudW1iZXIiIHRpdGxlPSIkdGl0bGUiPjxhIGhyZWY9IiMiPiRudW1iZXI8L2E+PC9saT4nDQogICAgICB9KTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHNsaWRpbmdUZWFzZXJTd2l0Y2hlcigpew0KDQogICAgJCgnZGl2LnRlYXNlci13cmFwcGVyLnR3LXNsaWRlcicpDQogICAgICAuZWFjaChmdW5jdGlvbigpew0KICAgICAgICB2YXIgakVsbSA9ICQodGhpcyksDQogICAgICAgICAgc2xpZGVyID0gJCgnZGl2LnNsaWRlcicsIHRoaXMpDQogICAgICAgICAgICAuY3NzKHtkaXNwbGF5OiAnYmxvY2snfSkNCiAgICAgICAgICAgIC53cmFwKCc8ZGl2IGNsYXNzPSJzbGlkZXItYmFyIiAvPicpOw0KDQogICAgICAgICQoJ2Rpdi5zbGlkZXItYmFyJywgdGhpcykNCiAgICAgICAgICAuYXBwZW5kKCc8c3BhbiBjbGFzcz0icHJldiIgLz4gPHNwYW4gY2xhc3M9Im5leHQiIC8+Jyk7DQoNCiAgICAgICAgZnVuY3Rpb24gc2xpZGVTbGlkZXJDYWxsKGUsIG8sIHVpKXsNCiAgICAgICAgICB1aSA9IHVpIHx8DQogICAgICAgICAgICBvOw0KICAgICAgICAgIHZhciB2YWwgPSAodWkgJiYgaXNGaW5pdGUodWkudmFsdWUpKT8gdWkudmFsdWUgOiAobykgPyBvLnZhbHVlIDogZmFsc2U7DQogICAgICAgICAgakVsbQ0KICAgICAgICAgICAgLnNjcm9sbGVyKCdtb3ZlVG8nLCB2YWwgKyAnJScsIGZhbHNlKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHNsaWRlcg0KICAgICAgICAgIC5zbGlkZXIoe21heFZhbHVlOiAxMDB9KQ0KICAgICAgICAgIC5iaW5kKCdzbGlkZScsIHNsaWRlU2xpZGVyQ2FsbCk7DQogICAgICAgIGpFbG0NCiAgICAgICAgICAuc2Nyb2xsZXIoew0KICAgICAgICAgICAgICAgIHByZXZMaW5rOiAnZGl2LnNsaWRlci1iYXIgc3Bhbi5wcmV2JywNCiAgICAgICAgICAgIG5leHRMaW5rOiAnZGl2LnNsaWRlci1iYXIgc3Bhbi5uZXh0Jw0KICAgICAgICAgIH0pDQogICAgICAgICAgLmJpbmQoJ3Vpc2Nyb2xsZXJzbGlkZScsIGZ1bmN0aW9uKGUsIGQpew0KICAgICAgICAgICAgc2xpZGVyDQogICAgICAgICAgICAgIC5zbGlkZXIoJ3ZhbHVlJywgZC5wZXJjZW50UG9zKTsNCiAgICAgICAgICB9KTsNCg0KICAgICAgfSk7DQogIH0NCg0KDQogIGZ1bmN0aW9uIGFkZFByaW50TGluaygpew0KDQogICAgZnVuY3Rpb24gcHJpbnQoKXsNCiAgICAgIHdpbmRvdy5wcmludCgpOw0KICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCg0KICAgICQoJzxsaSBjbGFzcz0icHJpbnQiPjxhIGhyZWY9IiMiPlByaW50PC9hPjwvbGk+JykNCiAgICAgIC5wcmVwZW5kVG8oJ3VsI3RleHQtZmVhdHVyZXMnKQ0KICAgICAgLmZpbmQoJ2EnKQ0KICAgICAgLmNsaWNrKHByaW50KTsNCiAgfQ0KDQogIGZ1bmN0aW9uIGZhcVRvYygpIHsNCiAgICB2YXIgaGFzaCAgICAgPSBsb2NhdGlvbi5oYXNoLA0KICAgICAgdGFiV2lkZ2V0cyAgPSAkKCdkaXYuc3VwZXItbGlzdCcpLA0KICAgICAgdGFicyAgICAgPSAkKCdoMyBhJywgdGFiV2lkZ2V0cykNCiAgICA7DQoNCiAgICBpZihoYXNoKXsNCiAgICAgIHRhYnMNCiAgICAgICAgLmZpbHRlcignW2hyZWY9JytoYXNoKyddJykNCiAgICAgICAgLmFkZENsYXNzKCdvbicpOw0KICAgIH0NCg0KICAgIHRhYldpZGdldHMNCiAgICAgIC5iaW5kKCd0YWJ0cmVlY29sbGFwc2UnLCBmdW5jdGlvbihlLCB1aSl7DQogICAgICAgIHVpLnBhbmVsLnN0b3AodHJ1ZSwgdHJ1ZSkuc2xpZGVQYXJlbnRVcCgpOw0KICAgICAgfSkNCiAgICAgIC5iaW5kKCd0YWJ0cmVlZXhwYW5kJywgZnVuY3Rpb24oZSwgdWkpew0KICAgICAgICB1aS5wYW5lbC5zdG9wKHRydWUsIHRydWUpLnNsaWRlUGFyZW50RG93bigpOw0KICAgICAgfSkNCiAgICAgIC50YWJ0cmVlKHsNCiAgICAgICAgICBidXR0b25TZWw6ICdoMyBhJywNCiAgICAgICAgICBhY3RpdmVCdXR0b25DbGFzczogJ29uJywNCiAgICAgICAgICB0b2dnbGVCdXR0b246IHRydWUsDQogICAgICAgICAgbXVsdGlTZWxlY3RhYmxlOiB0cnVlLA0KICAgICAgICAgIGhhbmRsZURpc3BsYXk6ICdpbml0aWFsJw0KICAgICAgICB9KTsNCg0KICB9DQoNCiAgJC5mbi50YWJDaGFuZ2VBZGRvbiA9IGZ1bmN0aW9uKCl7DQogICAgdGhpcw0KICAgICAgLmJpbmQoJ3RhYnRyZWVjb2xsYXBzZScsIGZ1bmN0aW9uKGUsIHVpKXsNCiAgICAgICAgdWkuYnV0dG9uLnBhcmVudCgpLnJlbW92ZUNsYXNzKCdvbicpOw0KICAgICAgfSkNCiAgICAgIC5iaW5kKCd0YWJ0cmVlZXhwYW5kJywgZnVuY3Rpb24oZSwgdWkpew0KICAgICAgICB1aS5idXR0b24ucGFyZW50KCkuYWRkQ2xhc3MoJ29uJyk7DQogICAgICB9KTsNCg0KICAgICQoJ2Eub24nLCB0aGlzKQ0KICAgICAgLnBhcmVudCgpDQogICAgICAuYWRkQ2xhc3MoJ29uJyk7DQogICAgcmV0dXJuIHRoaXM7DQogIH07DQoNCiAgZnVuY3Rpb24gY3JlYXRlVGFicygpew0KDQogICAgJCgnb2wudGV4dC1ib3gtdG9jLCBvbC50b2MtYm94LXRvYycpDQogICAgICAuZWFjaChmdW5jdGlvbigpew0KICAgICAgICAkKHRoaXMpDQogICAgICAgICAgLnRhYnRyZWUoDQogICAgICAgICAgICB7YWN0aXZlQnV0dG9uQ2xhc3M6ICdvbid9DQogICAgICAgICAgKQ0KICAgICAgICAgIC50YWJDaGFuZ2VBZGRvbigpOw0KICAgICAgfSk7DQogIH0NCg0KDQogICQoJ2h0bWwnKS5hZGRDbGFzcygnanMtb24nKTsgLy8gaHRtbCBjbGFzcw0KDQogICQuZXh0ZW5kKCQudWkuc2Nyb2xsZXIucHJvdG90eXBlLm9wdGlvbnMsIHsNCiAgICAvL0VsZW1lbnRzIENsYXNzZXMNCiAgICBhdG9tczogJ2Rpdi5yYWNrLXRlYXNlcicsDQogICAgcHJldkxpbms6ICdkaXYucHJldiBzcGFuJywNCiAgICBuZXh0TGluazogJ2Rpdi5uZXh0IHNwYW4nLA0KICAgIGRpYXNob3c6IDUwMDANCiAgfSk7DQoNCg0KICAkKGNhbGxPbkRvbVJlYWR5KTsNCn0pKGpRdWVyeSk7DQo=</sv:value>
  </sv:property>
  <sv:property sv:name="version" sv:type="String">
    <sv:value/>
  </sv:property>
  <sv:node sv:name="MetaData">
    <sv:property sv:name="jcr:primaryType" sv:type="Name">
      <sv:value>mgnl:metaData</sv:value>
    </sv:property>
    <sv:property sv:name="jcr:created" sv:type="Date">
      <sv:value>2013-07-22T14:26:56.970+02:00</sv:value>
    </sv:property>
    <sv:property sv:name="mgnl:authorid" sv:type="String">
      <sv:value>amag</sv:value>
    </sv:property>
    <sv:property sv:name="mgnl:creationdate" sv:type="Date">
      <sv:value>2013-07-22T14:26:56.970+02:00</sv:value>
    </sv:property>
    <sv:property sv:name="mgnl:lastmodified" sv:type="Date">
      <sv:value>2013-08-21T15:10:00.023+02:00</sv:value>
    </sv:property>
    <sv:property sv:name="mgnl:template" sv:type="String">
      <sv:value>processedJs</sv:value>
    </sv:property>
  </sv:node>
</sv:node>
